name: CI

on:
   push:
      branches:
        - Main
   pull_request:
      branches:
        - Main

jobs:
  lint:
    name: Lint ðŸ§¹
    runs-on: ubuntu-latest
    steps:
      - name: Checkout code ðŸ“©
        uses: actions/checkout@v3

      - uses: Roblox/setup-foreman@v1
        name: Install Foreman ðŸ“©
        with:
          token: ${{ SECRETS.GITHUB_TOKEN }}
      - name: Lint ðŸ§¹ 
        run: |
          selene ./scr

  style: 
      name: Style ðŸ§¹
      runs-on: ubuntu-latest
      steps: 
        - uses: actions/checkout@v3
        - uses:  JohnnyMorganz/stylua-action@v3
          with: 
            token: ${{SECRETS.GITHUB_TOKEN}}
            version: latest
            args: --check .